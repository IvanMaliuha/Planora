<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Planora.ViewModels.ViewModels"
             x:Class="Planora.Views.TeacherTrackingView"
             x:DataType="vm:TeacherTrackingViewModel">

    <Grid RowDefinitions="Auto, *">
        <!-- Ð—ÐÐ“ÐžÐ›ÐžÐ’ÐžÐš -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20" Spacing="20">
            <TextBlock Text="Ð¢Ñ€ÐµÐºÑ–Ð½Ð³ Ð²Ð¸ÐºÐ»Ð°Ð´Ð°Ñ‡Ñ–Ð²" FontSize="32" FontWeight="Bold" HorizontalAlignment="Center" Foreground="#333"/>
            
            <!-- ÐŸÐ¾ÑˆÑƒÐº (Ð· Ð¿Ð¾Ð´Ñ–Ñ”ÑŽ Enter, ÑÐº Ð¼Ð¸ Ñ€Ð¾Ð±Ð¸Ð»Ð¸ Ñ€Ð°Ð½Ñ–ÑˆÐµ) -->
            <Border Background="White" CornerRadius="12" BorderBrush="#333" BorderThickness="2" 
                    HorizontalAlignment="Stretch" Margin="40,0" Padding="10,5">
                <Grid ColumnDefinitions="Auto, *">
                    <PathIcon Grid.Column="0" Data="{StaticResource SearchIcon}" 
                              Width="16" Height="16" Margin="10,0,10,0" Foreground="Gray"/>
                    
                    <TextBox Grid.Column="1"
                             Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" 
                             Watermark="ÐŸÑ€Ñ–Ð·Ð²Ð¸Ñ‰Ðµ Ð²Ð¸ÐºÐ»Ð°Ð´Ð°Ñ‡Ð°..." 
                             BorderThickness="0" Background="Transparent" 
                             VerticalAlignment="Center" FontSize="16"
                             KeyDown="OnSearchBoxKeyDown"/>
                </Grid>
            </Border>
        </StackPanel>

        <!-- Ð¡ÐŸÐ˜Ð¡ÐžÐš Ð’Ð˜ÐšÐ›ÐÐ”ÐÐ§Ð†Ð’ -->
        <ScrollViewer Grid.Row="1" Margin="40,0">
            <ItemsControl ItemsSource="{Binding Teachers}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="White" CornerRadius="10" Margin="0,0,0,15" Padding="20"
                                BoxShadow="0 2 8 0 #15000000">
                            <Grid ColumnDefinitions="*, Auto">
                                
                                <!-- Ð†Ð½Ñ„Ð¾ Ð¿Ñ€Ð¾ Ð²Ð¸ÐºÐ»Ð°Ð´Ð°Ñ‡Ð° -->
                                <StackPanel Grid.Column="0" Spacing="5">
                                    <TextBlock Text="{Binding Name}" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="{Binding Department, StringFormat='ÐšÐ°Ñ„ÐµÐ´Ñ€Ð°: {0}'}" Foreground="Gray" FontSize="14"/>
                                    
                                    <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,5,0,0">
                                        
                                        <!-- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ (Ð—ÐµÐ»ÐµÐ½Ð¸Ð¹/Ð§ÐµÑ€Ð²Ð¾Ð½Ð¸Ð¹) -->
                                        <Panel>
                                            <Border Background="#D1FAE5" CornerRadius="4" Padding="8,2" IsVisible="{Binding !IsBusy}">
                                                <TextBlock Text="{Binding CurrentStatus}" Foreground="#065F46" FontWeight="Bold" FontSize="12"/>
                                            </Border>
                                            <Border Background="#FEE2E2" CornerRadius="4" Padding="8,2" IsVisible="{Binding IsBusy}">
                                                <TextBlock Text="{Binding CurrentStatus}" Foreground="#991B1B" FontWeight="Bold" FontSize="12"/>
                                            </Border>
                                        </Panel>
                                        
                                        <!-- Ð›Ð¾ÐºÐ°Ñ†Ñ–Ñ -->
                                        <StackPanel Orientation="Horizontal" Spacing="5" VerticalAlignment="Center">
                                            <TextBlock Text="ðŸ“" FontSize="14"/> 
                                            <TextBlock Text="{Binding Location}" FontWeight="Medium"/>
                                        </StackPanel>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Ð§Ð°Ñ -->
                                <StackPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right">
                                    <TextBlock Text="ÐÐ°ÑÑ‚ÑƒÐ¿Ð½Ð° Ð·Ð¼Ñ–Ð½Ð°:" Foreground="Gray" FontSize="10" HorizontalAlignment="Right"/>
                                    <TextBlock Text="{Binding NextLessonTime}" FontSize="20" FontWeight="Bold" Foreground="#2563EB" HorizontalAlignment="Right"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</UserControl>